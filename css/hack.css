/* ================================================================
   iOS Safari/Chrome 縦長表示バグ対策CSS
   iPhone縦長表示時、Flexboxのセンタリングが正しく計算されない問題を
   解決するためのGPU加速とWebKitプレフィックス指定
   ================================================================ */

/* zen-word-display のGPU加速（全デバイス共通） */
#zen-word-display {
    /* iOS/Safari対応: GPU加速を有効化してレンダリングを安定化 */
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    /* will-change: transform; */ /* 必要に応じて有効化 */
}

/* モバイル縦長専用のFlexbox強化（iOS Safari/Chrome対応） */
@media (orientation: portrait) and (max-width: 767px) {
    /* kakejiku-containerのflexbox配置を強制 */
    #kakejiku-container {
        /* iOS Safari対応: 親要素のflexbox配置を強制 */
        -webkit-box-pack: center;
        -webkit-box-align: center;
    }
    
    /* iOS Safari対応: zen-word-displayの中央配置を強制 */
    #zen-word-display {
        /* 絶対配置からの相対配置に変更して中央揃えを確実にする */
        position: relative;
        left: auto;
        right: auto;
        margin: 0 auto;
        
        /* Flexboxプロパティを明示的に再指定 */
        display: -webkit-box;
        display: -webkit-flex;
        display: flex;
        -webkit-box-orient: horizontal;
        -webkit-box-direction: reverse;
        -webkit-flex-direction: row-reverse;
        flex-direction: row-reverse;
        -webkit-box-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -webkit-align-items: center;
        align-items: center;
        
        /* iOS特有のバグ対策: GPU加速を明示的に有効化 */
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        
        /* width指定で中央配置を安定化 */
        width: 100%;
        max-width: 100%;
    }
}
